# SonarQube project configuration
sonar.projectKey=peteb4ker_romper
sonar.projectName=Romper Sample Manager
sonar.organization=peteb4ker
sonar.host.url=${SONAR_HOST_URL}
sonar.token=${SONAR_TOKEN}

# Source directories (no globs)
sonar.sources=app/renderer,shared,electron/main,electron/preload
# Include all folders that may contain test files (no globs)
sonar.tests=app/renderer,shared,electron/main,electron/preload
# Tell SonarQube which files are test files (use globs here)
sonar.test.inclusions=**/__tests__/**/*.test.ts,**/__tests__/**/*.test.tsx
# Exclude irrelevant or noise files from both tests and sources
# E2E tests are excluded as they don't participate in coverage reporting
sonar.exclusions=**/node_modules/**,**/coverage/**,**/dist/**,**/*.d.ts,app/renderer/styles/**,**/test-utils/**,**/*Mock*.ts,**/*Mock*.tsx,**/*.e2e.test.ts,**/*.e2e.test.tsx,**/migrations/**

# Tell SonarQube where the coverage report is
sonar.javascript.lcov.reportPaths=coverage/lcov.info

# Language and encoding
sonar.language=ts
sonar.sourceEncoding=UTF-8

# Coverage - using merged LCOV from Vitest unit + integration tests
sonar.javascript.lcov.reportPaths=coverage/merged/lcov.info

# Note: SonarQube sources and exclusions are aligned with Vitest coverage configuration
# to ensure both tools measure the same codebase (see vite.config.ts coverage.include/exclude)

# Additional settings
sonar.typescript.tsconfigPath=tsconfig.json
sonar.verbose=false

# Exclude accessibility rules that require native HTML elements
# These rules conflict with our use of custom components and virtualized lists
sonar.issue.ignore.multicriteria=e1,e2,e3,e4

# S6819: "Use native HTML elements instead of ARIA roles"
sonar.issue.ignore.multicriteria.e1.ruleKey=typescript:S6819
sonar.issue.ignore.multicriteria.e1.resourceKey=**/*

# S6842: "Non-interactive elements should not be assigned interactive roles"
sonar.issue.ignore.multicriteria.e2.ruleKey=typescript:S6842
sonar.issue.ignore.multicriteria.e2.resourceKey=**/*

# S6811: "ARIA attributes must be used according to role"
sonar.issue.ignore.multicriteria.e3.ruleKey=typescript:S6811
sonar.issue.ignore.multicriteria.e3.resourceKey=**/*

# S6847: "Non-interactive elements should not be assigned mouse or keyboard event listeners"
sonar.issue.ignore.multicriteria.e4.ruleKey=typescript:S6847
sonar.issue.ignore.multicriteria.e4.resourceKey=**/*
